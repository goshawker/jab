<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Automatic Generation - main.html</title>
  <meta content="no-cache" http-equiv="pragma">
  <meta content="no-cache" http-equiv="cache-control">
  <meta content="0" http-equiv="expires">
  <style type="text/css">
      div.topBar {
          width: 100%;
          height: 23px;
          background: #4BA9E3FF;
      }

      td.topTitle {
          color: #004E73;
          white-space: nowrap;
          font-size: 10pt;
          font-weight: bold;
      }

      table.editGrid {
          width: 100%;
          padding: 1px;
          font-size: 10pt;
          border: 1px solid #999;
          border-collapse: collapse;
      }

      tr.editGridHd {
          background: #d9d9d9 repeat-x center;
          text-align: center;
          height: 24px;
      }

      tr.editGrid {
          background: #ffffff repeat-x center;
          height: 24px;
      }

      td.editGridHd {
          border: 1px solid #999;
          font-size: 10pt;
          padding: 2px;
          FONT-WEIGHT: bold;
      }

      td.editGrid {
          border: 1px solid #999;
          font-size: 10pt;
          padding: 2px;
          background: #f7f7f7 repeat-x center;
      }

      .highLightNormal {
          font-size: 10pt;
          color: #000000;
          background: #f7f7f7 repeat-x center;
      }

      tr.repCnd {
          height: 20px;
      }

      td.repCndLb {
          border: 1px solid #999;
          padding: 1px 2px 1px 2px;
          white-space: nowrap;
          background: #f7f7f7 repeat-x center;
          color: #000;
          text-align: right;
      }

      td.repCndEditRight {
          border: 1px solid #999;
          padding: 1px 3px;
          white-space: nowrap;
          background: #f7f7f7 repeat-x center;
          width: 100%;
      }

      .bgDark {
          background-color: #ffffff;
      }

      .bgDarker {
          background-color: #0871AE;
      }

      .bgLight {
          background-color: #d9d9d9;
      }

      .bgLighter {
          background-color: #d9d9d9;
      }

      .normalFont {
          background: #f7f7f7;
          font-size: 10pt;
          font-family: arial, ו, verdana, helvetica;
          line-height: 130%;
      }

      tr.editGridHd {
          background: #d9d9d9 repeat-x center;
          text-align: center;
          height: 24px;
      }

      td.editGridHd {
          border: 1px solid #999;
          font-size: 10pt;
          padding: 2px;
          FONT-WEIGHT: bold;
      }
  </style>
</head>
<body>
<div class="topBar">
  <table border="0" cellpadding="0" cellspacing="0" height="100%">
    <tr>
      <td class="topTitle">&nbsp;&nbsp;Auto Generate - main.html </td>
    </tr>
  </table>
</div>
<form action="#NAMESPACE#/query" enctype="multipart/form-data" method="post">
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr height="5">
      <td nowrap="nowrap" width="15">&nbsp;</td>
      <td width="100%">&nbsp;</td>
      <td nowrap="nowrap" width="15">&nbsp;</td>
    </tr>
    <tr>
      <td></td>
      <td>
        <table class="editGrid">
          <tr height="30">
            <td class="highLightNormal" colspan="4" nowrap="nowrap"
                width="15%">&nbsp; Query Conditions:
            </td>
          </tr>
          #QUERYCONDITION#
          <tr class="bgLight" height="30">
            <td align="right" class="normalFont" colspan="4">
              <input type="button" accesskey="s" value="Query(s)" onclick="Query()"> &nbsp;
              <input type="reset" accesskey="c" value="Reset(c)">
              <input type="button" accesskey="n"  name="init" value="New(n)" onclick="window.location.href='#NAMESPACE#/new.html'">&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <table border="0" cellpadding="0" cellspacing="0" class="editGrid" width="100%">
          <tr height="30">
            <td class="highLightNormal" colspan="3" nowrap="nowrap">
              &nbsp; Query Results:
            </td>
          </tr>
          <tr>
            <td width="5">&nbsp;</td>
            <td id="tagsContainer" width="100%">
              <div>
                <table class="editGrid" id="sortTbl" width="100%">
                  <!-- query result title -->
                  <tr class="editGridHd">
                    #GRIDHEAD#
                  </tr>
                  <tr class="editGrid" type="data" id="tdata">
                  </tr>
                </table>
              </div>
            </td>
            <td width="5">&nbsp;</td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</form>
<script type="text/javascript">
  function Query(){
    let form = document.getElementsByTagName('FORM')[0];
    let requestUrl = form.action;
    let xmlHttpRequest;
    if (window.XMLHttpRequest) {
      xmlHttpRequest = new XMLHttpRequest();
    } else {
      xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttpRequest.open('GET',requestUrl);
    xmlHttpRequest.onreadystatechange = ()=>{
      if(xmlHttpRequest.readyState === 4){
        if(xmlHttpRequest.status >= 200 && xmlHttpRequest.status < 300){
          let string = xmlHttpRequest.responseText;
          const data = JSON.parse(string);
          let count = data.length;
          let trHtml="";

          for (let i = 0; i < count; i++) {
            trHtml +="<tr  class=\"editGrid\" nowrap=\"nowrap\">";
            #GRIDDATA#
            trHtml+="<td class='editGrid'  align='left'><a href='#NAMESPACE#/edit?#UPDATESTR#'>Edit</a><a href='#NAMESPACE#/delete?#UPDATESTR#'>Delete</a></td>";
            trHtml +="</tr>";
          }
          document.getElementById("tdata").innerHTML = trHtml;


        } else if(xmlHttpRequest.status >= 400){
          alert('the request has failed. please try again later. error info:['+xmlHttpRequest.responseText+']');
        }
      }
    }
    xmlHttpRequest.send('a=9&b=6');
  }

</script>
</body>
</html>